# 프롬프트 포맷 비교 가이드

프롬프트 작성 시 자주 비교되는 포맷들의 특성과 적합한 상황을 정리합니다.

## XML 태그 vs Markdown

### XML 태그 방식

```xml
<instruction>
사용자의 질문에 답변하세요.
</instruction>

<context>
{context}
</context>

<question>
{question}
</question>

<output_format>
JSON으로 응답
</output_format>
```

**장점:**
- 명확한 시작/끝 경계
- 중첩 구조 표현 가능
- 파싱하기 용이 (프로그래매틱 처리)
- LLM이 섹션 경계를 명확히 인식

**단점:**
- 토큰 수 증가
- 사람이 읽기에 번거로움
- 오타 시 짝이 안 맞을 수 있음

**적합한 상황:**
- 구조화된 출력이 필요할 때 (JSON, 테이블)
- 입력 데이터와 지시문을 명확히 분리해야 할 때
- 여러 섹션이 있고 혼동 방지가 중요할 때

---

### Markdown 방식

```markdown
## Instruction
사용자의 질문에 답변하세요.

## Context
{context}

## Question
{question}

## Output Format
JSON으로 응답
```

**장점:**
- 가독성이 좋음
- 토큰 효율적
- 자연스러운 문서 흐름
- 사람이 읽고 수정하기 쉬움

**단점:**
- 경계가 XML보다 덜 명확
- 깊은 중첩 구조 표현 어려움
- 특수문자(#, *, -) 충돌 가능

**적합한 상황:**
- 자연어 응답이 주 출력일 때
- 간단한 구조의 프롬프트
- 빠른 반복 수정이 필요할 때

---

## 비교 평가 체크리스트

### 1. 구조 명확성 (Boundary Clarity)

| 질문 | XML 예상 | Markdown 예상 |
|-----|---------|--------------|
| 섹션 경계가 명확한가? | 우세 | 보통 |
| 입력 데이터가 지시문과 섞이지 않는가? | 우세 | 보통 |
| 출력 포맷이 혼동 없이 전달되는가? | 동등 | 동등 |

### 2. 출력 정확도 (Output Accuracy)

| 질문 | 측정 방법 |
|-----|----------|
| JSON 출력이 유효한가? | JSON 파싱 성공률 |
| 필수 필드가 모두 있는가? | 필드 존재 체크 |
| 지시한 형식을 따르는가? | 포맷 일치율 |

### 3. 일관성 (Consistency)

| 질문 | 측정 방법 |
|-----|----------|
| 동일 입력에 대해 비슷한 출력인가? | 동일 입력 3회 테스트 |
| 케이스마다 품질 편차가 적은가? | 점수 분산 |

### 4. Edge Case 처리

| 테스트 케이스 | 관찰 포인트 |
|-------------|-----------|
| 빈 입력 | 에러 없이 처리하는가 |
| 매우 긴 입력 | 잘림 없이 처리하는가 |
| 특수문자 포함 | 이스케이프 문제 없는가 |
| 입력에 XML/Markdown 포함 | 혼동 없이 처리하는가 |

---

## 실험 설계 템플릿

### 1. 가설 설정

```
가설: {포맷 A}가 {특정 상황}에서 {포맷 B}보다 {측정 지표}가 더 좋을 것이다.

예시:
- XML 태그가 JSON 출력 정확도에서 Markdown보다 높을 것이다
- Markdown이 자연어 응답 자연스러움에서 XML보다 높을 것이다
```

### 2. 테스트 케이스 설계

```yaml
test_cases:
  - id: normal_001
    type: normal
    input: "일반적인 질문"

  - id: edge_001
    type: edge
    input: ""  # 빈 입력

  - id: edge_002
    type: edge
    input: "<xml>입력에 XML 태그가 있음</xml>"

  - id: stress_001
    type: stress
    input: "{매우 긴 텍스트...}"
```

### 3. 결과 기록

```yaml
results:
  - case_id: normal_001
    output_a: "..."
    output_b: "..."
    comparison:
      accuracy: A_better
      format: Equal
      clarity: B_better
    winner: A
```

### 4. 집계 및 결론

```
총 20개 케이스 중:
- A 승: 12 (60%)
- B 승: 5 (25%)
- 동점: 3 (15%)

차원별:
- 정확도: A 우세 (70% vs 20%)
- 명확성: B 우세 (40% vs 50%)
- 포맷 준수: 동등

결론: {상황}에서는 {포맷}을 권장
```

---

## 자주 비교되는 다른 변형들

### Few-shot 예시 개수

```
비교: 3-shot vs 5-shot vs 0-shot
측정: 출력 품질, 포맷 준수율, 토큰 효율성
```

### 지시문 스타일

```
비교: 상세한 단계별 지시 vs 간결한 목표 제시
측정: 태스크 완료율, 창의성, 일관성
```

### 역할(Role) 지정

```
비교: "You are an expert..." vs "As a specialist..." vs 역할 없음
측정: 톤 적절성, 전문성, 태스크 정렬
```
